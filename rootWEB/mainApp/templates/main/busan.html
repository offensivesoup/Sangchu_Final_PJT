<!DOCTYPE html>
<html lang="en">
{%load static %}
  <head>

    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
    <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@100;200;300;400;500;600;700;800;900&display=swap" rel="stylesheet">

    <title>Busan Analysis</title>

    <!-- Bootstrap core CSS -->
    <link href="{% static '/bootstrap/vendor/bootstrap/css/bootstrap.min.css' %}" rel="stylesheet">
    <!-- Additional CSS Files -->
    <link rel="stylesheet" href="{% static '/bootstrap/assets/css/fontawesome.css' %}">
    <link rel="stylesheet" href="{% static '/bootstrap/assets/css/templatemo-woox-travel.css' %}">
    <link rel="stylesheet" href="{% static '/bootstrap/assets/css/owl.css' %}">
    <link rel="stylesheet" href="{% static '/bootstrap/assets/css/animate.css' %}">
    <link rel="stylesheet" href="https://unpkg.com/swiper@7/swiper-bundle.min.css"/>

    <!-- map CSS -->
<style>
.busan-map {
/* height: 500px; */
height: 600px;
width: 800px;
min-width: 410px;
max-width: 1000px;
/* margin: 0 auto; */
}

.loading {
margin-top: 10em;
text-align: center;
color: gray;
}

<!--  차트1 css-->
.highcharts-figure,
.highcharts-data-table table {
    min-width: 360px;
    max-width: 800px;
    margin: 1em auto;
}

.highcharts-data-table table {
    font-family: Verdana, sans-serif;
    border-collapse: collapse;
    border: 1px solid #ebebeb;
    margin: 10px auto;
    text-align: center;
    width: 100%;
    max-width: 500px;
}

.highcharts-data-table caption {
    padding: 1em 0;
    font-size: 1.2em;
    color: #555;
}

.highcharts-data-table th {
    font-weight: 600;
    padding: 0.5em;
}

.highcharts-data-table td,
.highcharts-data-table th,
.highcharts-data-table caption {
    padding: 0.5em;
}

.highcharts-data-table thead tr,
.highcharts-data-table tr:nth-child(even) {
    background: #f8f8f8;
}

.highcharts-data-table tr:hover {
    background: #f1f7ff;
}



</style>
  </head>

<body>
  <!-- ***** Preloader Start ***** -->
  <div id="js-preloader" class="js-preloader">
    <div class="preloader-inner">
      <span class="dot"></span>
      <div class="dots">
        <span></span>
        <span></span>
        <span></span>
      </div>
    </div>
  </div>
  <!-- ***** Preloader End ***** -->

  <!-- ***** Header Area Start ***** -->
  <header class="header-area header-sticky">
    <div class="container">
        <div class="row">
            <div class="col-12">
                <nav class="main-nav">
                    <!-- ***** Logo Start ***** -->
                    <a href="../" class="logo">
                        <img src="{% static 'bootstrap/assets/images/SANGCHU.png' %}" alt="">
                    </a>
                    <!-- ***** Logo End ***** -->
                    <!-- ***** Menu Start ***** -->
                    <ul class="nav">
                        <li><a href="../">Home</a></li>
                        <li><a href="./" class="active">Busan Analysis</a></li>
                        <li><a href="reservation.html">Property</a></li>
                        <li><a href="reservation.html">Sign Up</a></li>
                    </ul>   
                    <a class='menu-trigger'>
                        <span>Menu</span>
                    </a>
                    <!-- ***** Menu End ***** -->
                </nav>
            </div>
        </div>
    </div>
  </header>
  <!-- ***** Header Area End ***** -->
  <!-- map script -->
  <script src="https://code.highcharts.com/maps/highmaps.js"></script>
  <script src="https://code.highcharts.com/maps/modules/exporting.js"></script>
  <script src="https://code.highcharts.com/maps/modules/accessibility.js"></script>
<!--  차트 1-->
<script src="https://code.highcharts.com/highcharts.js"></script>
<script src="https://code.highcharts.com/modules/series-label.js"></script>
<script src="https://code.highcharts.com/modules/exporting.js"></script>
<script src="https://code.highcharts.com/modules/export-data.js"></script>
<script src="https://code.highcharts.com/modules/accessibility.js"></script>

  <div class="busan-main-content">
    <div class="container" style="margin: 0;">
      <div class="row">
        <div class="col-lg-6">
          <div class="accordion" id="accordionExample">
            <div class="accordion-item">
              <h2 class="accordion-header">
                <button id= "Accbtnone" class="accordion-button" type="button" data-bs-toggle="collapse" data-bs-target="#collapseOne" aria-expanded="true" aria-controls="collapseOne">
                  임대료 추세 데이터
                </button>
              </h2>
              <div id="collapseOne" class="accordion-collapse collapse show" data-bs-parent="#accordionExample">
                <div class="accordion-body">
             <figure class="highcharts-figure">
    <div id="container-chart1"></div>

</figure>





<!--                  <strong>This is the first item's accordion body.</strong> It is shown by default, until the collapse plugin adds the appropriate classes that we use to style each element. These classes control the overall appearance, as well as the showing and hiding via CSS transitions. You can modify any of this with custom CSS or overriding our default variables. It's also worth noting that just about any HTML can go within the <code>.accordion-body</code>, though the transition does limit overflow.-->
                </div>
              </div>
            </div>
            <div class="accordion-item">
              <h2 class="accordion-header">
                <button class="accordion-button collapsed" type="button" data-bs-toggle="collapse" data-bs-target="#collapseTwo" aria-expanded="false" aria-controls="collapseTwo">
                  집객시설 분포도
                </button>
              </h2>
              <div id="collapseTwo" class="accordion-collapse collapse" data-bs-parent="#accordionExample">
                <div class="accordion-body">
                  <strong>This is the second item's accordion body.</strong> It is hidden by default, until the collapse plugin adds the appropriate classes that we use to style each element. These classes control the overall appearance, as well as the showing and hiding via CSS transitions. You can modify any of this with custom CSS or overriding our default variables. It's also worth noting that just about any HTML can go within the <code>.accordion-body</code>, though the transition does limit overflow.
                </div>
              </div>
            </div>
            <div class="accordion-item">
              <h2 class="accordion-header">
                <button class="accordion-button collapsed" type="button" data-bs-toggle="collapse" data-bs-target="#collapseThree" aria-expanded="false" aria-controls="collapseThree">
                  인구밀도 분포도
                </button>
              </h2>
              <div id="collapseThree" class="accordion-collapse collapse" data-bs-parent="#accordionExample">
                <div class="accordion-body">
                  <strong>This is the third item's accordion body.</strong> It is hidden by default, until the collapse plugin adds the appropriate classes that we use to style each element. These classes control the overall appearance, as well as the showing and hiding via CSS transitions. You can modify any of this with custom CSS or overriding our default variables. It's also worth noting that just about any HTML can go within the <code>.accordion-body</code>, though the transition does limit overflow.
                </div>
              </div>
            </div>

            <div class="accordion-item">
              <h2 class="accordion-header">
                <button class="accordion-button collapsed" type="button" data-bs-toggle="collapse" data-bs-target="#collapseFour" aria-expanded="false" aria-controls="collapseFour">
                  인구수 분포도
                </button>
              </h2>
              <div id="collapseFour" class="accordion-collapse collapse" data-bs-parent="#accordionExample">
                <div class="accordion-body">
                  <strong>This is the second item's accordion body.</strong> It is hidden by default, until the collapse plugin adds the appropriate classes that we use to style each element. These classes control the overall appearance, as well as the showing and hiding via CSS transitions. You can modify any of this with custom CSS or overriding our default variables. It's also worth noting that just about any HTML can go within the <code>.accordion-body</code>, though the transition does limit overflow.
                </div>
              </div>
            </div>
            <div class="accordion-item">
              <h2 class="accordion-header">
                <button class="accordion-button collapsed" type="button" data-bs-toggle="collapse" data-bs-target="#collapseFive" aria-expanded="false" aria-controls="collapseFive">
                  구별 서비스 인구 분포도
                </button>
              </h2>
              <div id="collapseFive" class="accordion-collapse collapse" data-bs-parent="#accordionExample">
                <div class="accordion-body">
                  <strong>This is the second item's accordion body.</strong> It is hidden by default, until the collapse plugin adds the appropriate classes that we use to style each element. These classes control the overall appearance, as well as the showing and hiding via CSS transitions. You can modify any of this with custom CSS or overriding our default variables. It's also worth noting that just about any HTML can go within the <code>.accordion-body</code>, though the transition does limit overflow.
                </div>
              </div>
            </div>
            <div class="accordion-item">
              <h2 class="accordion-header">
                <button class="accordion-button collapsed" type="button" data-bs-toggle="collapse" data-bs-target="#collapseSix" aria-expanded="false" aria-controls="collapseSix">
                  구별 점포 밀도 분포도
                </button>
              </h2>
              <div id="collapseSix" class="accordion-collapse collapse" data-bs-parent="#accordionExample">
                <div class="accordion-body">
                  <strong>This is the second item's accordion body.</strong> It is hidden by default, until the collapse plugin adds the appropriate classes that we use to style each element. These classes control the overall appearance, as well as the showing and hiding via CSS transitions. You can modify any of this with custom CSS or overriding our default variables. It's also worth noting that just about any HTML can go within the <code>.accordion-body</code>, though the transition does limit overflow.
                </div>
              </div>
            </div>
          </div>
        </div>
        <div class="col-lg-6">
          <div class="busan-map-wrap">
            <!-- 지도 -->
            <div id="container" class="busan-map"></div>
          </div>
        </div>
      </div>
    </div>
  </div>



  <!-- 지도 script -->
<script>
<!-- 구별 분석 페이지로  이동하는 함수   -->
function goRegionPage(selectedRegion){
        var regionUrl = '/region/' + selectedRegion + '/';
        window.location.href = regionUrl;

}



geopath = '{% static "busan_gu.json" %}'
async function geodata() {

    const geojson = await fetch(
        geopath
    ).then(response => response.json());

    // Prepare the geojson
    const states = Highcharts.geojson(geojson, 'map'),
        rivers = Highcharts.geojson(geojson, 'mapline'),
        cities = Highcharts.geojson(geojson, 'mappoint'),
        specialCityLabels = {
            Melbourne: {
                align: 'right'
            },
            Canberra: {
                align: 'right',
                y: -5
            },
            Wollongong: {
                y: 5
            },
            Brisbane: {
                y: -5
            }
        };

    // Skip or move some labels to avoid collision
    states.forEach(state => {
        // Disable data labels
        if (state.properties.code_hasc === 'AU.CT' || state.properties.code_hasc === 'AU.JB') {
            state.dataLabels = {
                enabled: false
            };
        }
        if (state.properties.code_hasc === 'AU.TS') {
            state.dataLabels = {
                style: {
                    color: '#333333'
                }
            };
        }
        // Move center for data label
        if (state.properties.code_hasc === 'AU.SA') {
            state.middleY = 0.3;
        }
        if (state.properties.code_hasc === 'AU.QL') {
            state.middleY = 0.7;
        }
    });

    cities.forEach(city => {
        if (specialCityLabels[city.name]) {
            city.dataLabels = specialCityLabels[city.name];
        }
    });

    // Initialize the chart
    Highcharts.mapChart('container', {
        title: {
            text: 'Busan Map'
        },

        accessibility: {
            point: {
                valueDescriptionFormat: '{xDescription}.'
            },
            description: 'Map of Australia, showing examples of multiple geometry types in Highcharts Maps: Map areas (used for regions), map lines (used for rivers), and map points (used for cities).'
        },

        mapNavigation: {
            enabled: true,
            buttonOptions: {
                verticalAlign: 'bottom'
            }
        },

        series: [{
            name: '구/군',
            data: states,
            color: Highcharts.color(Highcharts.getOptions().colors[0])
                .setOpacity(0.75)
                .get(),
            states: {
                hover: {
                    color: Highcharts.getOptions().colors[1]
                }
            },
            dataLabels: {
                enabled: true,
                format: '{point.name}',
                style: {
                    width: '80px', // force line-wrap
                    textTransform: 'uppercase',
                    fontWeight: 'normal',
                    textOutline: 'none',
                    color: 'black'
                }
            },
            tooltip: {
                pointFormat: '{point.name}'
            },
            events: {
                            click: function (event) {
                                var selectedRegion = event.point.name;
<!--                                console.log(selectedRegion)-->
                                goRegionPage(selectedRegion)
                            }
                        }
        }, ]
    });

};
geodata()
</script>



<!--  <footer>-->
<!--    <div class="container">-->
<!--      <div class="row">-->
<!--        <div class="col-lg-12">-->
<!--          <p>Copyright © 2036 <a href="#">WoOx Travel</a> Company. All rights reserved. -->
<!--          <br>Design: <a href="https://templatemo.com" target="_blank" title="free CSS templates">TemplateMo</a> Distribution: <a href="https://themewagon.com target="_blank" >ThemeWagon</a></p>-->
<!--        </div>-->
<!--      </div>-->
<!--    </div>-->
<!--  </footer>-->


<!--  아코디언 데이터 script -->
    <script src="https://code.jquery.com/jquery-latest.min.js"></script>
  <script>
<!--차트 1 함수 -->
function chart1(data){
Highcharts.chart('container-chart1', {

    title: {
        text: '부산 임대료 상위 3개구와 하위 3개구 추세',
        align: 'left'
    },

    subtitle: {
        text: '상위 3개: 수영구, 중구, 해운대구, 하위 3개: 금정구, 사상구, 사하구 ',
        align: 'left'
    },

    yAxis: {
        title: {
            text: '임대료'
        },
        labels: {
            formatter: function () {
                return Highcharts.numberFormat(this.value, 0, ',', ',');
    }
}

    },

    xAxis: {
        accessibility: {
            rangeDescription: 'Range: 2014 to 2022'
        }
    },

    legend: {
        layout: 'vertical',
        align: 'right',
        verticalAlign: 'middle'
    },

    plotOptions: {
        series: {
            label: {
                connectorAllowed: false
            },
            pointStart: 2014
        }
    },

    series: data.data
    ,

    responsive: {
        rules: [{
            condition: {
                maxWidth: 500
            },
            chartOptions: {
                legend: {
                    layout: 'horizontal',
                    align: 'center',
                    verticalAlign: 'bottom'
                }
            }
        }]
    }

});


}

<!--처음 로딩시 아코디언 메뉴 1의  차트1 실행 -->
  $(document).ready(()=>{
    $.ajax({
    url: '/analysis1/',
    method: 'get',
    dataType: 'json',
    success: function(data){
      console.log(data.data);
      chart1(data);

    },
    error: function (error) {
            console.log('Error:', error);
        }
  })

<!--아코디언 메뉴 1 클릭시 차트 그리기 -->
    $('#Accbtnone').click(function(){
      $.ajax({
        url: '/analysis1/',
        method: 'get',
        dataType: 'json',
        success: function(data){
          console.log(data);
          chart1(data);

        },
        error: function (error) {
                console.log('Error:', error);
            }
      })

    })

 })



  </script>

  <!-- Scripts -->
  <!-- Bootstrap core JavaScript -->

  <script src="{% static '/bootstrap/vendor/jquery/jquery.min.js' %}"></script>
  <script src="{% static '/bootstrap/vendor/bootstrap/js/bootstrap.min.js' %}"></script>

  <script src="{% static '/bootstrap/assets/js/isotope.min.js' %}"></script>
  <script src="{% static '/bootstrap/assets/js/owl-carousel.js' %}"></script>
<!--  <script src="{% static '/bootstrap/assets/js/wow.js' %}"></script>-->
  <script src="{% static '/bootstrap/assets/js/tabs.js' %}"></script>
  <script src="{% static '/bootstrap/assets/js/popup.js' %}"></script>
  <script src="{% static '/bootstrap/assets/js/custom.js' %}"></script>

  <script>
    $(".option").click(function(){
      $(".option").removeClass("active");
      $(this).addClass("active"); 
    });
  </script>

  </body>

</html>
